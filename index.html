<!DOCTYPE html>

<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <title>Pracownia Leśna 6</title>
</head>


<body>

    <div class="wrapper_index">
        <div class="logo">
            <img src="img/logo.jpg" id="logo" alt="Logo Pracowni Leśnej 6">
        </div>
        <div id="menubar" class="menubar">
            <div class="glowna">
                <a href="index.html" class="href">GŁÓWNA</a>
            </div>
            <div class="produkty">
                <a href="products.html" class="produkty">REALIZACJE</a>
            </div>
            <div class="onas">
                <a href="" class="onas">O NAS</a>
            </div>
        </div>







                <img id="scroll" class="slider_wrap">






        <div class="news">

            <h1>Długo wyczekiwane kalendarze na 2019 rok już są!</h1>
            <p> Wszystkim zainteresowanym gorąco polecamy! Kalendarze są w płóciennej, twardej oprawie w formacie A5. Układ kalendarza jest tygodniowy, a ponadto wewnątrz znajdują się: numery tygodni, rozpiska miesięczna oraz miejsce na notatki. Polecamy wszystkim, którzy cenią 100% ręczną robotę. Cena to jedyne 110 zł + kw. Wszystkich chętnych zapraszamy do składania zamówień!</p>


        </div>
        <div class="video"></div>
        <div class="about_products"></div>

      <footer>
            <div class="contactinfo">
                <p>pracownialesna6@gmail.com </p>
                <p> +48 503 491 825 </p>
                <p> pn - pt: 10:00 - 18:00 </p>
            </div>
            <div class="fb">icon</div>
            <div class="insta">icon</div>
        </footer>





    </div>


    <script>
        let scroll = document.querySelector("#scroll");
        let baselink = "http://angadesign.dk/exam/wordpress/wp-json/wp/v2/news?_embed";
        let files = new Array();
        let manual = false;

        //swiping functionality taken from Alan's example//
        	var touchstartX = 0;
			var touchstartY = 0;
			var touchendX = 0;
			var touchendY = 0;
        scroll.addEventListener('touchstart', function(event) {
				touchstartX = event.changedTouches[0].screenX;
				touchstartY = event.changedTouches[0].screenY;
			}, false);

			scroll.addEventListener('touchend', function(event) {
				touchendX = event.changedTouches[0].screenX;
				touchendY = event.changedTouches[0].screenY;
				handleGesture();
			}, false);

			function handleGesture() {
				var swiped = 'swiped: ';
				if (touchendX < touchstartX) {
					minus();
				}
				if (touchendX > touchstartX) {
				plus();
				}

			}
        //end of Alan's script//

let i;
            i=1;

        function minus(){
             manual = true;
            console.log(i);
            i--;
            i--;
            getImages();


        }

        function plus(){
             manual = true;
            console.log(i);
            if(i==100){
                i=1;
            }
            i++;
            getImages();


        }

        function getImages() {
            fetch("http://angadesign.dk/exam/wordpress/wp-json/wp/v2/slider_images?_embed").then(res => res.json()).then(showImages);
        }

        function showImages(images) {
            console.log(i);
            files[i] = images[i]._embedded["wp:featuredmedia"]["0"].media_details.sizes.medium.source_url;

                scroll.src = files[i];


            if(manual==false){
timeout();
            }}


        if(manual==true){
            setTimeout(function(){manual=false;timeout();},2000);
        }

function timeout(){
        setTimeout(function(){i++, getImages();}, 3000);}
        getImages();

    </script>
</body>

</html>
