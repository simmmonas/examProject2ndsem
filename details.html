<!DOCTYPE html>
<html lang="">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <title>Produkty</title>

    <style>
        .big {
            width: 100%;
            height: 100%;

        }

        .small {
            width: 20vw;
            display: inline;
            padding: 0;
        }

        li {
            list-style: none;
        }

    </style>



</head>

<body>
    <div id="wrapperproducts">
        <div class="logo">
            <img src="img/logo.jpg" id="logo" alt="Logo Pracowni Leśnej 6">
        </div>
        <div id="menubar" class="menubar">
            <div class="glowna">
                <a href="index.html" class="href">GŁÓWNA</a>
            </div>
            <div class="produkty">
                <a href="products.html" class="produkty">REALIZACJE</a>
            </div>
            <div class="onas">
                <a href="" class="onas">O NAS</a>

            </div>


        </div>
        <template id="templateProducts">


     <img id="imgmain" src="" class="small">
        <h2 id="title">Title</h2>
        <h3 id="date">Date</h3>
        <p id="description"></p>
        </template>

        <main></main>

        <footer>
            <div id="left">
                <h2>tel.</h2>
                <p2>+48 503 491 825</p2>
                <p3>pracownialesna6@gmail.com
                </p3>
                <h3>instagram</h3>
                <p3>pracownialesna6</p3>
                <h4>sklep online</h4>
                <p4>
                    <a4>www.etsy.com/shop/PracowniaLesna6</a4>
                </p4>


            </div>


            <div id="right">
                <h5>Godziny otwarcia:</h5>
                <p5>poniedziałek-piątek: 10:00 - 18:00</p5>
                <p5>sobota, niedziela - nieczynne</p5>


            </div>

        </footer>
    </div>

    <script>
        let template = document.querySelector("#templateProducts").content;
        let parent = document.querySelector("main");
        var n = 1;
        let baselink = "http://angadesign.dk/exam/wordpress/wp-json/wp/v2/product/";
        let params = new URLSearchParams(window.location.search);
        let id = params.get("id");
        let imglink = "http://angadesign.dk/exam/wordpress/wp-json/wp/v2/news?_embed";
        let files = new Array();

          //swiping functionality taken from Alan's example//
        	var touchstartX = 0;
			var touchstartY = 0;
			var touchendX = 0;
			var touchendY = 0;
        scroll.addEventListener('touchstart', function(event) {
				touchstartX = event.changedTouches[0].screenX;
				touchstartY = event.changedTouches[0].screenY;
			}, false);

			scroll.addEventListener('touchend', function(event) {
				touchendX = event.changedTouches[0].screenX;
				touchendY = event.changedTouches[0].screenY;
				handleGesture();
			}, false);

			function handleGesture() {
				var swiped = 'swiped: ';
				if (touchendX < touchstartX) {
					minus();
				}
				if (touchendX > touchstartX) {
				plus();
				}

			}
        //end of Alan's script//
 function minus(){
             manual = true;
            console.log(i);
            i--;
            i--;
            getImages();


        }

        function plus(){
             manual = true;
            console.log(i);
            if(i==100){
                i=1;
            }
            i++;
            getImages();


        }






        function getProducts() {
            //so what we are doing different here is going around the wordpress limitation and asking for rest API to show us 100 results per page
            //however 100 is the max but we have more than 100 items in "products" so we are including also page 2, where is the rest of the items
            //after reaching 100, this is why the link is so strange
            fetch(baselink + id + "?_embed").then(res => res.json()).then(showAll);
        }

        function showAll(product) {

            console.log(product.length);
            const copy = template.cloneNode(true);
            copy.querySelector("h2").textContent = product.title.rendered;
            copy.querySelector("h3").textContent = product.acf.date;
            copy.querySelector("#description").innerHTML = product.content.rendered;





            function bigger() {

                if (this.classList == "small") {
                    this.classList.add("big");
                    this.classList.remove("small");
                    this.classList.add("this");
                    first.firstElementChild.appendChild(this);
                }




            }

            parent.appendChild(copy);

        }



        getProducts();

    </script>



</body>

</html>
