<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <link rel="stylesheet" href="css/style.css">
    <title>Produkty</title>
</head>

<body>
    <div id="wrapperproducts">
     <div class="logo">
        <img src="img/logo.jpg" id="logo" alt="Logo Pracowni Leśnej 6">
    </div>
    <div id="menubar" class="menubar">
        <div class="glowna">
            <a href="index.html" class="href">GŁÓWNA</a>
        </div>
        <div class="produkty">
            <a href="products.html" class="produkty">REALIZACJE</a>
        </div>
        <div class="onas">
            <a href="" class="onas">O NAS</a>

     </div>


    </div>
    <template id="templateProducts">
      <img id="imgmain" src="">
      <img id="img1" src="">
      <img id="img2" src="">
      <img id="img3" src="">
      <img id="img4" src="">
      <img id="img5" src="">
      <img id="img6" src="">
      <img id="img7" src="">
        <div id="changer" style="width: 100%; height: 100%;"></div>
        <h2 id="title">Title</h2>
        <h3 id="date">Date</h3>
        <p id="description"></p>
        </template>

    <main></main>

        <footer><div id="left">
            <h2>tel.</h2><p2>+48 503 491 825</p2>
            <p3>pracownialesna6@gmail.com
</p3> <h3>instagram</h3><p3>pracownialesna6</p3>
            <h4>sklep online</h4><p4><a4>www.etsy.com/shop/PracowniaLesna6</a4>
</p4>


            </div>


            <div id="right">
            <h5>Godziny otwarcia:</h5>
<p5>poniedziałek-piątek: 10:00 - 18:00</p5>
                <p5>sobota, niedziela - nieczynne</p5>


            </div>

    </footer></div>

<script>
    let template = document.querySelector("#templateProducts").content;
    let parent = document.querySelector("main");
var n=1;
    let baselink = "http://angadesign.dk/exam/wordpress/wp-json/wp/v2/product/";
    let params = new URLSearchParams(window.location.search);
    let id = params.get("id");







    function getProducts(){
        //so what we are doing different here is going around the wordpress limitation and asking for rest API to show us 100 results per page
        //however 100 is the max but we have more than 100 items in "products" so we are including also page 2, where is the rest of the items
        //after reaching 100, this is why the link is so strange
        fetch(baselink + id + "?_embed").then(res=>res.json()).then(showAll);
    }
    function showAll(product){

                         console.log(product.length);
                                 const copy = template.cloneNode(true);
            copy.querySelector("h2").textContent = product.title.rendered;
            copy.querySelector("h3").textContent = product.acf.date;
            copy.querySelector("#description").innerHTML = product.content.rendered;
    copy.querySelector("#imgmain").src = product._embedded["wp:featuredmedia"]["0"].media_details.sizes.medium.source_url;
       if(product.acf.img1){
        copy.querySelector("#img1").src = product.acf.img1.sizes.medium;}

       if(product.acf.img1){
        copy.querySelector("#img1").src = product.acf.img1.sizes.medium;}


       if(product.acf.img2){
        copy.querySelector("#img2").src = product.acf.img2.sizes.medium;}


        if(product.acf.img3){
        copy.querySelector("#img3").src = product.acf.img3.sizes.medium;}


        if(product.acf.img4){
        copy.querySelector("#img4").src = product.acf.img4.sizes.medium;}


        if(product.acf.img5){
        copy.querySelector("#img5").src = product.acf.img5.sizes.medium;}


        if(product.acf.img6){
        copy.querySelector("#img6").src = product.acf.img6.sizes.medium;}


        if(product.acf.img7){
        copy.querySelector("#img7").src = product.acf.img7.sizes.medium;}

        if(product.acf.img8){
        copy.querySelector("#img8").src = product.acf.img8.sizes.medium;}

        let firstpart = "url('";
        let endpart = "')";

        copy.querySelector("#changer").style.backgroundImage = firstpart + product.acf.img2.sizes.medium +  endpart;


            parent.appendChild(copy);

    }

   getProducts();


    </script>



</body>

</html>
